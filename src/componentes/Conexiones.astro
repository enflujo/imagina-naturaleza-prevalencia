---
import { edadPerpetrador } from '@/cerebro/datos';
import type { GrupoSexo } from '@/tipos';
import { convertirEscala } from '@enflujo/alquimia';
const {mujeres} = edadPerpetrador.vida?.mayor18 as GrupoSexo;
const totalesMujeres = mujeres.totales;
let y = 0;
const alto = (valor: number) => convertirEscala(valor,0,100,50, 100);

const origenes = Object.keys(edadPerpetrador.nombres)
  .filter((nombre) => nombre !== 'n')
  .sort((a, b) => totalesMujeres[b] - totalesMujeres[a])
  .map((nombre) => {
    const respuesta = { llave: nombre, y, valor: totalesMujeres[nombre] };
    y += totalesMujeres[nombre];
    return respuesta;
  });

console.log(origenes);
const colores = [
  '#69d2e7',
  '#a7dbd8',
  '#e0e4cc',
  '#f38630',
  '#fa6900',
  '#fe4365',
  '#fc9d9a',
  '#f9cdad',
  '#c8c8a9',
  '#83af9b',
  '#ecd078',
  '#d95b43',
  '#c02942',
  '#542437',
  '#53777a',
  '#556270',
  '#4ecdc4',
  '#c7f464',
  '#ff6b6b',
  '#c44d58',
];
// const posY = (valor) =>
---

<svg width="100%" height="50vh">
  <rect width="100%" height="100%" fill="white"></rect>

  {
    origenes.map((origen, i) => (
      <g class="origen" style={`transform: translateY(${origen.y}%);fill:${colores[i]}`}>
        <rect x="0" y="0" width="40" height={`${alto(origen.valor)}%`} />
        <text x="0" y="5%">{`${origen.valor}%`}</text>
        <text x="5%" y="10%"}>{edadPerpetrador.nombres[origen.llave]}</text>
      </g>
    ))
  }
</svg>

<style lang="scss">
  .origen {
    font-size: 0.75em;
    text {
      fill: black;
    }
  }
</style>
