---
import { edadPerpetrador } from '@/cerebro/datos';
import type { GrupoSexo } from '@/tipos';
import { convertirEscala } from '@enflujo/alquimia';
const {mujeres} = edadPerpetrador.vida?.mayor18 as GrupoSexo;
const totalesMujeres = mujeres.totales;
let y = 0;

const altoViz = 600;
const espacioEntre = 35;
const maxAlto = altoViz - (espacioEntre * 5);
const alto = (valor: number) => convertirEscala(valor, 0, 100, 0, maxAlto);
console.log(maxAlto, alto(32))
const origenes = Object.keys(edadPerpetrador.nombres)
  .filter((nombre) => nombre !== 'n')
  .sort((a, b) => totalesMujeres[b] - totalesMujeres[a])
  .map((nombre) => {
    const respuesta = { llave: nombre, y, valor: totalesMujeres[nombre] };
    y += totalesMujeres[nombre];
    return respuesta;
  });

// console.log(origenes);
const colores = [
  '#69d2e7',
  '#a7dbd8',
  '#e0e4cc',
  '#f38630',
  '#fa6900',
  '#fe4365',
  '#fc9d9a',
  '#f9cdad',
  '#c8c8a9',
  '#83af9b',
  '#ecd078',
  '#d95b43',
  '#c02942',
  '#542437',
  '#53777a',
  '#556270',
  '#4ecdc4',
  '#c7f464',
  '#ff6b6b',
  '#c44d58',
];
// const posY = (valor) =>
---

<svg width="100%" height="600px">
  <rect width="100%" height="100%" fill="white"></rect>

  {
    origenes.map((origen, i) => (
      <g class="origen" style={`transform: translateY(${espacioEntre * (i + 1) + alto(origen.y )}px);fill:${colores[i]}`}>
        <rect x="3px" y="0" width="40" height={`${alto(origen.valor)}px`} />
        <text x="3px" y="-17px"} font-weight="bold" font-size="15">{edadPerpetrador.nombres[origen.llave]}</text>
        <text x="3px" y="-3px" font-size="11">{`${origen.valor}%`} </text>
      </g>
    ))
  }
</svg>

<style lang="scss">
  .origen {
    font-size: 0.75em;
    text {
      fill: black;
    }
  }
</style>
